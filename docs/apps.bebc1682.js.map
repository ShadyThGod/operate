{"version":3,"sources":["apps/settings/index.js","apps/notepad/index.js","apps/calculator/index.js","apps/cmdprompt/utils.js","apps/cmdprompt/index.js","apps/index.js"],"names":["settingsWindowContent","document","createRange","createContextualFragment","applySettings","bgImg","querySelector","files","undefined","body","style","backgroundImage","window","URL","createObjectURL","applySettingsAndClose","e","target","closest","_windowClass","removeFromDOM","closeWindow","settingsWindow","title","id","content","customCSS","settingsWindowCSS","eventListeners","type","handler","element","module","exports","notepadWindowContent","onLoad","getElementById","focus","addEventListener","text","then","value","notepadWindow","notepadWindowCSS","menu","label","submenu","click","text_blob","Blob","webkitURL","link","createElement","download","href","select","onLoadFunction","size","height","minHeight","calculatorWindowContent","calcKeyPress","State","focused_window_id","console","log","key","preventDefault","number_regex","is_number","RegExp","test","is_char","is_operator","activeElement","ctrlKey","Calculator","lhs","buttonPress","classList","contains","indexOf","innerHTML","rhs","operation","history","updateHistory","current_value","substring","length","startCalc","dataset","operator","result","calculate","parseFloat","toString","toFixed","push","forEach","calculation","checked","add","remove","calculatorWindow","calculatorCSS","commands","echo","requiresValue","returnsResult","description","clear","setTimeout","addNewPrompt","calc","openApp","notepad","help","Object","keys","ID","instance","WindowInstances","filter","w","addToDOM","active","show","inputKeyDownHandler","runCommand","parseCommand","CmdPrompt","currentIndexInHistory","name","getPromptElement","promptElement","className","promptTextElement","textContent","promptInputElement","appendChild","input","commandRegEx","matches","exec","trimEnd","printCommand","command","commandText","innerText","currentInput","parentElement","resultText","JSON","stringify","cmdPromptWindowContent","cmdPromptWindow","cmdPromptCSS","require"],"mappings":"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","file":"apps.bebc1682.js","sourceRoot":"..\\src","sourcesContent":["/**\r\n * Settings Window\r\n */\r\n\r\nimport * as settingsWindowCSS from './settings.scss';\r\n\r\nlet settingsWindowContent = document.createRange().createContextualFragment(`\r\n    <div class=\"settings\">\r\n        <div id=\"background-setting\" class=\"setting\">\r\n            <div class=\"label\" style=\"flex-grow: 100\">\r\n                Background Image:\r\n            </div>\r\n            <div class=\"input\" style=\"flex-grow: 1\">\r\n                <label for=\"bg-file\" style=\"width: fit-content\" class=\"button\">Browse...</label>\r\n                <input type=\"file\" name=\"bg-file\" id=\"bg-file\" accept=\"image/*\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"buttons\">\r\n        <div class=\"cancel-button button\">Cancel</div>\r\n        <div class=\"apply-button button\">Apply</div>\r\n        <div class=\"ok-button button\">OK</div>\r\n    </div>\r\n`);\r\n\r\nfunction applySettings() {\r\n    let bgImg = document.querySelector('#bg-file').files || undefined;\r\n    if (bgImg !== undefined) {\r\n        document.body.style.backgroundImage = `url(${window.URL.createObjectURL(bgImg[0])})`;\r\n    }\r\n}\r\n\r\nfunction applySettingsAndClose(e) {\r\n    applySettings();\r\n    e.target.closest('.window')._windowClass.removeFromDOM();\r\n}\r\n\r\nfunction closeWindow(e) {\r\n    e.target.closest('.window')._windowClass.removeFromDOM();\r\n}\r\n\r\nlet settingsWindow = {\r\n    title: 'Settings',\r\n    id: 'settings',\r\n    content: settingsWindowContent,\r\n    customCSS: settingsWindowCSS,\r\n    eventListeners: [{\r\n        type: 'click',\r\n        handler: applySettings,\r\n        element: '.apply-button'\r\n    }, {\r\n        type: 'click',\r\n        handler: applySettingsAndClose,\r\n        element: '.ok-button'\r\n    }, {\r\n        type: 'click',\r\n        handler: closeWindow,\r\n        element: '.cancel-button'\r\n    }],\r\n};\r\n\r\nmodule.exports = settingsWindow;","import * as notepadWindowCSS from \"./notepad.scss\";\r\n\r\nlet notepadWindowContent = document.createRange().createContextualFragment(`\r\n<textarea id=\"notepad-textarea\"></textarea>\r\n<input type=\"file\" style=\"display: none\" id=\"notepad-file-input\" accept=\"text/plain\"/>\r\n`);\r\n\r\nfunction onLoad() {\r\n  document.getElementById(\"notepad-textarea\").focus();\r\n  document\r\n    .getElementById(\"notepad-file-input\")\r\n    .addEventListener(\"input\", (e) => {\r\n      for (const file of e.target.files) {\r\n        file\r\n          .text()\r\n          .then(\r\n            (text) => (document.getElementById(\"notepad-textarea\").value = text)\r\n          );\r\n      }\r\n      e.target.value = \"\";\r\n    });\r\n}\r\n\r\nlet notepadWindow = {\r\n  title: \"Notepad\",\r\n  id: \"notepad\",\r\n  content: notepadWindowContent,\r\n  customCSS: notepadWindowCSS,\r\n  menu: [\r\n    {\r\n      label: \"File\",\r\n      submenu: [\r\n        {\r\n          label: \"Open\",\r\n          click: () => {\r\n            document.getElementById(\"notepad-file-input\").click();\r\n          },\r\n        },\r\n        {\r\n          label: \"Save\",\r\n          click: () => {\r\n            let text = document.getElementById(\"notepad-textarea\").value;\r\n            let text_blob = new Blob([text], { type: \"text/plain\" });\r\n            window.URL = window.URL || window.webkitURL;\r\n            let link = document.createElement(\"a\");\r\n            link.download = \"note.txt\";\r\n            link.href = window.URL.createObjectURL(text_blob);\r\n            link.click();\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      label: \"Edit\",\r\n      submenu: [\r\n        {\r\n          label: \"Select All\",\r\n          click: () => {\r\n            document.getElementById(\"notepad-textarea\").select();\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n  onLoadFunction: onLoad,\r\n  size: {\r\n    height: \"30%\",\r\n    minHeight: \"30%\",\r\n  },\r\n};\r\n\r\nmodule.exports = notepadWindow;\r\n","import * as calculatorCSS from \"./calculator.scss\";\r\n\r\nlet calculatorWindowContent = document.createRange().createContextualFragment(`\r\n<div class=\"input-container\">\r\n    <input type=\"text\" id=\"calculator-input\" class=\"calc-input\">\r\n    <div class=\"history-checkbox-input\">\r\n        <input type=\"checkbox\" id=\"history-checkbox\" />\r\n        <label for=\"history-checkbox\">Show History</label>\r\n    </div>\r\n    <div class=\"button-rows\">\r\n        <div class=\"row-0 row\">\r\n            <button type=\"button\" class=\"button\" id=\"calc-del\">DEL</button>\r\n            <button type=\"button\" class=\"button\" id=\"calc-ce\">CE</button>\r\n            <button type=\"button\" class=\"button\" id=\"calc-c\">C</button>\r\n        </div>\r\n        <div class=\"row-1 row\">\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-1\">1</button>\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-2\">2</button>\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-3\">3</button>\r\n            <button type=\"button\" class=\"button operator-button\" data-operator=\"/\" id=\"calc-divide\">รท</button>\r\n        </div>\r\n        <div class=\"row-2 row\">\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-4\">4</button>\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-5\">5</button>\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-6\">6</button>\r\n            <button type=\"button\" class=\"button operator-button\" data-operator=\"*\" id=\"calc-multiply\">ร</button>\r\n        </div>\r\n        <div class=\"row-3 row\">\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-7\">7</button>\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-8\">8</button>\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-9\">9</button>\r\n            <button type=\"button\" class=\"button operator-button\" data-operator=\"-\" id=\"calc-sub\">-</button>\r\n        </div>\r\n        <div class=\"row-4 row\">\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-0\">0</button>\r\n            <button type=\"button\" class=\"button number-button\" id=\"calc-00\">00</button>\r\n            <button type=\"button\" class=\"button decimal-button\" id=\"calc-.\" style=\"width: 20%;\">.</button>\r\n            <button type=\"button\" class=\"button operator-button\" data-operator=\"+\" id=\"calc-add\">+</button>\r\n        </div>\r\n        <div class=\"row-5 row\">\r\n            <button type=\"button\" class=\"button\" id=\"calc-eq\">=</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"history-container\">\r\n    <textarea readonly id=\"history\"></textarea>\r\n</div>\r\n`);\r\n\r\nfunction calcKeyPress(e) {\r\n  if (window.State.focused_window_id === \"calculator\") {\r\n    console.log(e.key);\r\n\r\n    if (e.key === \".\") {\r\n      e.preventDefault();\r\n      document.getElementById(\"calc-.\").click();\r\n    }\r\n\r\n    let number_regex = new RegExp(/\\d/);\r\n    let is_number = number_regex.test(e.key);\r\n\r\n    let char_regex = new RegExp(/^[a-zA-Z]$/);\r\n    let is_char = char_regex.test(e.key);\r\n\r\n    let operator_regex = new RegExp(/^[\\+\\-\\/\\*]$/);\r\n    let is_operator = operator_regex.test(e.key);\r\n\r\n    if (\r\n      is_number &&\r\n      document.getElementById(\"calculator-input\") !== document.activeElement\r\n    ) {\r\n      document.querySelector(`#calc-${e.key}`).click();\r\n    }\r\n\r\n    if (is_operator) {\r\n      if (\r\n        document.getElementById(\"calculator-input\") === document.activeElement\r\n      ) {\r\n        e.preventDefault();\r\n      }\r\n      let key;\r\n      switch (e.key) {\r\n        case \"+\":\r\n          key = \"add\";\r\n          break;\r\n        case \"/\":\r\n          key = \"divide\";\r\n          break;\r\n        case \"-\":\r\n          key = \"sub\";\r\n          break;\r\n        case \"*\":\r\n          key = \"multiply\";\r\n          break;\r\n      }\r\n      document.querySelector(`#calc-${key}`).click();\r\n    }\r\n\r\n    if (\r\n      document.getElementById(\"calculator-input\") === document.activeElement &&\r\n      is_char\r\n    ) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    if (\r\n      (e.key === \"Backspace\" || e.key === \"Delete\") &&\r\n      document.getElementById(\"calculator-input\") !== document.activeElement\r\n    ) {\r\n      document.querySelector(`#calc-del`).click();\r\n    }\r\n\r\n    if (e.ctrlKey && e.key === \"a\") {\r\n      e.preventDefault();\r\n      document.getElementById(\"calculator-input\").select();\r\n    }\r\n\r\n    if (e.key === \"Enter\") {\r\n      document.querySelector(`#calc-eq`).click();\r\n    }\r\n\r\n    window.State.Calculator.lhs = document.getElementById(\r\n      \"calculator-input\"\r\n    ).value;\r\n  }\r\n}\r\n\r\nfunction buttonPress(e) {\r\n  if (\r\n    e.target.classList.contains(\"number-button\") ||\r\n    e.target.id === \"calc-.\"\r\n  ) {\r\n    if (\r\n      e.target.id === \"calc-.\" &&\r\n      document.getElementById(\"calculator-input\").value.indexOf(\".\") !== -1\r\n    ) {\r\n      return;\r\n    }\r\n    document.getElementById(\"calculator-input\").value += e.target.innerHTML;\r\n  }\r\n\r\n  if (e.target.id == \"calc-ce\") {\r\n    document.getElementById(\"calculator-input\").value = \"\";\r\n    window.State.Calculator.lhs = undefined;\r\n    window.State.Calculator.rhs = undefined;\r\n    window.State.Calculator.operation = undefined;\r\n  }\r\n\r\n  if (e.target.id == \"calc-c\") {\r\n    window.State.Calculator = {\r\n      lhs: undefined,\r\n      rhs: undefined,\r\n      operation: undefined,\r\n      history: [],\r\n    };\r\n    document.getElementById(\"calculator-input\").value = \"\";\r\n    updateHistory();\r\n  }\r\n\r\n  if (e.target.id == \"calc-del\") {\r\n    let current_value = document.getElementById(\"calculator-input\").value;\r\n    document.getElementById(\"calculator-input\").value = current_value.substring(\r\n      0,\r\n      current_value.length - 1\r\n    );\r\n  }\r\n\r\n  let lhs = window.State.Calculator.lhs;\r\n  let rhs = window.State.Calculator.rhs;\r\n  let operation = window.State.Calculator.operation;\r\n\r\n  if (e.target.classList.contains(\"operator-button\")) {\r\n    if (!rhs) {\r\n      window.State.Calculator.operation = e.target.dataset.operator;\r\n      window.State.Calculator.rhs = window.State.Calculator.lhs;\r\n      window.State.Calculator.lhs = undefined;\r\n      document.getElementById(\"calculator-input\").value = \"\";\r\n    } else {\r\n      startCalc();\r\n      window.State.Calculator.operation = e.target.dataset.operator;\r\n      window.State.Calculator.rhs = document.getElementById(\r\n        \"calculator-input\"\r\n      ).value;\r\n      window.State.lhs = undefined;\r\n      document.getElementById(\"calculator-input\").value = \"\";\r\n    }\r\n  }\r\n\r\n  if (e.target.id === \"calc-eq\") {\r\n    if (lhs && rhs && operation) {\r\n      let result = calculate(operation, lhs, rhs);\r\n      document.getElementById(\"calculator-input\").value = result;\r\n      window.State.Calculator.lhs = result;\r\n    }\r\n    return;\r\n  }\r\n\r\n  window.State.Calculator.lhs = document.getElementById(\r\n    \"calculator-input\"\r\n  ).value;\r\n}\r\n\r\nfunction startCalc() {\r\n  let lhs = window.State.Calculator.lhs;\r\n  let rhs = window.State.Calculator.rhs;\r\n  let operation = window.State.Calculator.operation;\r\n\r\n  let result = calculate(operation, lhs, rhs);\r\n  document.getElementById(\"calculator-input\").value = result;\r\n  window.State.Calculator.lhs = result;\r\n}\r\n\r\nfunction calculate(operation, lhs, rhs) {\r\n  let result;\r\n  lhs = parseFloat(lhs);\r\n  rhs = parseFloat(rhs);\r\n  switch (operation) {\r\n    case \"+\":\r\n      result = lhs + rhs;\r\n      break;\r\n    case \"-\":\r\n      result = rhs - lhs;\r\n      break;\r\n    case \"/\":\r\n      result = rhs / lhs;\r\n      break;\r\n    case \"*\":\r\n      result = lhs * rhs;\r\n      break;\r\n  }\r\n  result = result.toString().indexOf(\".\") !== -1 ? result.toFixed(3) : result;\r\n  window.State.Calculator.operation = undefined;\r\n  window.State.Calculator.lhs = undefined;\r\n  window.State.Calculator.rhs = undefined;\r\n  window.State.Calculator.history.push({\r\n    lhs,\r\n    rhs,\r\n    operation,\r\n    result,\r\n  });\r\n  updateHistory();\r\n  return result;\r\n}\r\n\r\nfunction updateHistory() {\r\n  document.getElementById(\"history\").innerHTML = \"\";\r\n  window.State.Calculator.history.forEach((calculation) => {\r\n    document.getElementById(\r\n      \"history\"\r\n    ).innerHTML += `${calculation.rhs}\\n${calculation.operation}\\t${calculation.lhs}\\n========\\n${calculation.result}\\n\\n`;\r\n  });\r\n}\r\n\r\nfunction onLoad() {\r\n  window.State.Calculator = {\r\n    operation: undefined,\r\n    lhs: undefined,\r\n    rhs: undefined,\r\n    history: [],\r\n  };\r\n\r\n  document.getElementById(\"calculator-input\").addEventListener(\"input\", (e) => {\r\n    window.State.Calculator.lhs = e.target.value;\r\n  });\r\n\r\n  document\r\n    .getElementById(\"history-checkbox\")\r\n    .addEventListener(\"change\", (e) => {\r\n      if (e.target.checked) {\r\n        document.getElementById(\"calculator\").classList.add(\"show-history\");\r\n      } else {\r\n        document.getElementById(\"calculator\").classList.remove(\"show-history\");\r\n      }\r\n    });\r\n}\r\n\r\nlet calculatorWindow = {\r\n  title: \"Calculator\",\r\n  id: \"calculator\",\r\n  content: calculatorWindowContent,\r\n  customCSS: calculatorCSS,\r\n  onLoadFunction: onLoad,\r\n  eventListeners: [\r\n    {\r\n      type: \"keydown\",\r\n      handler: calcKeyPress,\r\n      element: \"body\",\r\n    },\r\n    {\r\n      type: \"click\",\r\n      handler: buttonPress,\r\n    },\r\n  ],\r\n};\r\n\r\nmodule.exports = calculatorWindow;\r\n","const commands = {\r\n  echo: {\r\n    requiresValue: true,\r\n    returnsResult: true,\r\n    description: \"Prints any value passed to it.\",\r\n    handler: (value) => {\r\n      return value;\r\n    },\r\n  },\r\n  clear: {\r\n    requiresValue: false,\r\n    returnsResult: false,\r\n    description: \"Clears the command prompt.\",\r\n    handler: () => {\r\n      document.getElementById(\"command-prompt-content\").innerHTML = \"\";\r\n\r\n      setTimeout(() => {\r\n        addNewPrompt();\r\n        console.clear();\r\n      }, 1);\r\n    },\r\n  },\r\n  calc: {\r\n    requiresValue: false,\r\n    returnsResult: false,\r\n    description: \"Opens the calculator.\",\r\n    handler: () => {\r\n      openApp(\"calculator\");\r\n    },\r\n  },\r\n  notepad: {\r\n    requiresValue: false,\r\n    returnsResult: false,\r\n    description: \"Opens the notepad.\",\r\n    handler: () => {\r\n      openApp(\"notepad\");\r\n    },\r\n  },\r\n  help: {\r\n    requiresValue: false,\r\n    returnsResult: true,\r\n    description: \"Shows this help dialog.\",\r\n    handler: () => {\r\n      let result = \"\";\r\n      for (let key of Object.keys(commands)) {\r\n        result += `${key}:\\t\\t${commands[key].description}\\n`;\r\n      }\r\n      return result;\r\n    },\r\n  },\r\n};\r\n\r\nfunction openApp(ID) {\r\n  let instance = window.WindowInstances.filter((w) => w.id === ID)[0];\r\n  if (instance !== undefined) {\r\n    instance.addToDOM({\r\n      active: true,\r\n    });\r\n    instance.show();\r\n  }\r\n}\r\n\r\nfunction inputKeyDownHandler(e) {\r\n  if (e.key === \"Enter\" && e.target.value.length !== 0) {\r\n    e.preventDefault();\r\n    let command = parseCommand(e.target.value);\r\n    runCommand(command);\r\n  }\r\n  if (e.key === \"ArrowUp\") {\r\n    e.preventDefault();\r\n    let history = window.State.CmdPrompt.history;\r\n    if (history.length !== 0) {\r\n      let currentIndexInHistory = window.State.CmdPrompt.currentIndexInHistory;\r\n      if (currentIndexInHistory) {\r\n        currentIndexInHistory =\r\n          currentIndexInHistory !== 0\r\n            ? currentIndexInHistory - 1\r\n            : currentIndexInHistory;\r\n        window.State.CmdPrompt.currentIndexInHistory = currentIndexInHistory;\r\n      } else {\r\n        currentIndexInHistory = window.State.CmdPrompt.history.length - 1;\r\n        window.State.CmdPrompt.currentIndexInHistory = currentIndexInHistory;\r\n      }\r\n      let { name, value } = window.State.CmdPrompt.history[\r\n        currentIndexInHistory\r\n      ];\r\n      document.getElementById(\"prompt-input\").value = `${name}${\r\n        value ? \" \" + value : \"\"\r\n      }`;\r\n    }\r\n  }\r\n}\r\n\r\nfunction getPromptElement() {\r\n  let promptElement = document.createElement(\"div\");\r\n  promptElement.className = \"prompt\";\r\n  let promptTextElement = document.createElement(\"div\");\r\n  promptTextElement.textContent = \"C:\\\\OPERATE>\";\r\n  promptTextElement.className = \"prompt-text\";\r\n  let promptInputElement = document.createElement(\"input\");\r\n  promptInputElement.id = \"prompt-input\";\r\n  promptInputElement.type = \"text\";\r\n  promptTextElement.className = \"prompt-input\";\r\n  promptElement.appendChild(promptTextElement);\r\n  promptElement.appendChild(promptInputElement);\r\n  return promptElement;\r\n}\r\n\r\nfunction parseCommand(input) {\r\n  let commandRegEx = new RegExp(/^\\s*(\\w+)\\s?(.+)*$/);\r\n  let matches = commandRegEx.exec(input);\r\n  if (matches) {\r\n    let name = matches[1];\r\n    let value = matches[2] ? matches[2].trimEnd() : undefined;\r\n    return { name, value };\r\n  }\r\n}\r\n\r\nfunction printCommand(command, result) {\r\n  let { name, value } = command;\r\n\r\n  let commandText = document.createElement(\"div\");\r\n  commandText.className = \"command-text\";\r\n  commandText.innerText = `${name}${value ? ` ${value}` : \"\"}`;\r\n\r\n  let currentInput = document.getElementById(\"prompt-input\");\r\n  currentInput.parentElement.appendChild(commandText);\r\n  currentInput.remove();\r\n\r\n  let resultText = document.createElement(\"div\");\r\n  resultText.className = \"result\";\r\n  resultText.innerText = result;\r\n  document.getElementById(\"command-prompt-content\").appendChild(resultText);\r\n\r\n  addNewPrompt();\r\n}\r\n\r\nfunction runCommand(command) {\r\n  let result = \"\";\r\n  let { name, value } = command;\r\n\r\n  if (name && commands[name]) {\r\n    if (commands[name].requiresValue) {\r\n      if (value) {\r\n        if (commands[name].returnsResult) {\r\n          result = commands[name].handler(value);\r\n        } else {\r\n          commands[name].handler(value);\r\n        }\r\n      } else {\r\n        result = \"Please enter a value for the command.\";\r\n      }\r\n    } else {\r\n      if (commands[name].returnsResult) {\r\n        result = commands[name].handler();\r\n      } else {\r\n        commands[name].handler();\r\n      }\r\n    }\r\n  } else {\r\n    result = `${name} is not a valid command.`;\r\n  }\r\n\r\n  if (\r\n    JSON.stringify(\r\n      window.State.CmdPrompt.history[window.State.CmdPrompt.history.length - 1]\r\n    ) !== JSON.stringify(command)\r\n  ) {\r\n    window.State.CmdPrompt.history.push(command);\r\n  }\r\n\r\n  printCommand(command, result);\r\n}\r\n\r\nfunction addNewPrompt() {\r\n  document\r\n    .getElementById(\"command-prompt-content\")\r\n    .appendChild(getPromptElement());\r\n  document\r\n    .getElementById(\"prompt-input\")\r\n    .addEventListener(\"keydown\", inputKeyDownHandler);\r\n  if (window.State.focused_window_id === \"cmdprompt\") {\r\n    document.getElementById(\"prompt-input\").focus();\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  addNewPrompt,\r\n  getPromptElement,\r\n  inputKeyDownHandler,\r\n  printCommand,\r\n  runCommand,\r\n  parseCommand,\r\n};\r\n","import * as cmdPromptCSS from \"./cmdprompt.scss\";\r\nimport { getPromptElement, inputKeyDownHandler } from \"./utils\";\r\n\r\nlet cmdPromptWindowContent = document.createRange().createContextualFragment(`\r\n  <div class=\"command-prompt\" id=\"command-prompt-content\"></div>\r\n`);\r\n\r\nfunction onLoad() {\r\n  window.State.CmdPrompt = {\r\n    history: [],\r\n    currentIndexInHistory: undefined,\r\n  };\r\n\r\n  document\r\n    .getElementById(\"command-prompt-content\")\r\n    .appendChild(getPromptElement());\r\n  document\r\n    .getElementById(\"prompt-input\")\r\n    .addEventListener(\"keydown\", inputKeyDownHandler);\r\n  document.getElementById(\"prompt-input\").focus();\r\n}\r\n\r\nlet cmdPromptWindow = {\r\n  title: \"Command Prompt\",\r\n  id: \"cmdprompt\",\r\n  content: cmdPromptWindowContent,\r\n  customCSS: cmdPromptCSS,\r\n  onLoadFunction: onLoad,\r\n  eventListeners: [\r\n    {\r\n      type: \"click\",\r\n      handler: () => {\r\n        document.getElementById(\"prompt-input\").focus();\r\n      },\r\n    },\r\n  ],\r\n};\r\n\r\nmodule.exports = cmdPromptWindow;\r\n","const settingsWindow = require(\"./settings\");\r\nconst notepadWindow = require(\"./notepad\");\r\nconst calculatorWindow = require(\"./calculator\");\r\nconst cmdPromptWindow = require(\"./cmdprompt\");\r\n\r\nmodule.exports = {\r\n  settingsWindow,\r\n  notepadWindow,\r\n  calculatorWindow,\r\n  cmdPromptWindow,\r\n};\r\n"]}